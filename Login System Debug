private VBox createSignInPane() {
        VBox pane = new VBox(20);
        pane.setAlignment(Pos.CENTER);
        pane.setPadding(new Insets(20));

        // Email field
        Label emailLabel = new Label("Username/Email");
        emailLabel.setStyle("-fx-text-fill: white; fx-font-size: 13;");

        TextField emailField = new TextField();
        emailField.setPromptText("Enter your Username/Email");
        emailField.setStyle(getInputFieldStyle());

        VBox emailBox = new VBox(8, emailLabel, emailField);

        // Password field
        Label passwordLabel = new Label("Password");
        passwordLabel.setStyle("-fx-text-fill: white; -fx-font-size: 13;");

        PasswordField passwordField = new PasswordField();
        passwordField.setPromptText("Enter your password");
        passwordField.setStyle(getInputFieldStyle());

        VBox passwordBox = new VBox(8, passwordLabel, passwordField);

        // Buttons
        Button signInQRButton = createActionButton("Sign-In using QR-Code", "#00ffcc", false);
        signInQRButton.setPrefWidth(180);
        signInQRButton.setOnAction(e -> showQRCodeLogin());

        VBox mainButtons = new VBox(15);
        mainButtons.setAlignment(Pos.CENTER);

        HBox actionButtons = new HBox(15);
        actionButtons.setAlignment(Pos.CENTER);

        Button exitButton = createActionButton("Exit", "#ff6b6b", true);
        Button confirmButton = createActionButton("Confirm", "#00ffcc", false);

        exitButton.setPrefWidth(120);
        confirmButton.setPrefWidth(120);

        confirmButton.setOnAction(e -> {
            String email = emailField.getText().trim();
            String password = passwordField.getText().trim();

            // FIXED: Changed && to || so it checks if EITHER field is empty
            if (email.isEmpty() || password.isEmpty()) {
                showAlert(Alert.AlertType.WARNING, "Missing Information", "Please enter both email and password.");
                return;
            }

            if (userManager.authenticate(email, password)) {
                currentUser = email;
                showDashboard(email);
            } else {
                showAlert(Alert.AlertType.ERROR, "Login Failed", "Invalid email or password.");
            }
        });

        exitButton.setOnAction(e -> Platform.exit());

        actionButtons.getChildren().addAll(exitButton, confirmButton);
        mainButtons.getChildren().addAll(signInQRButton, actionButtons);

        // Quote at bottom
        Label quoteLabel = new Label("\"Beware of little expenses; a small leak will sink a great ship.\"\nBenjamin Franklin");
        quoteLabel.setStyle("-fx-text-fill: #00ffcc; -fx-font-size: 11; -fx-text-alignment: center; -fx-wrap-text: true;");
        quoteLabel.setWrapText(true);
        quoteLabel.setMaxWidth(350);

        pane.getChildren().addAll(emailBox, passwordBox, mainButtons, quoteLabel);
        return pane;
    }

    private VBox createSignUpPane() {
        VBox pane = new VBox(15);
        pane.setAlignment(Pos.CENTER);
        pane.setPadding(new Insets(20));

        Label titleLabel = new Label("Create your Account");
        titleLabel.setStyle("-fx-text-fill: white; -fx-font-size: 16; -fx-font-weight: bold;");

        Label subtitleLabel = new Label("Join us in unleashing your financial Journey");
        subtitleLabel.setStyle("-fx-text-fill: #00ffcc; -fx-font-size: 12;");

        VBox headerBox = new VBox(5, titleLabel, subtitleLabel);
        headerBox.setAlignment(Pos.CENTER);

        // Full Name field
        TextField nameField = new TextField();
        nameField.setPromptText("Full Name/Username");
        nameField.setStyle(getInputFieldStyle());

        // Email field
        TextField emailField = new TextField();
        emailField.setPromptText("Email Address");
        emailField.setStyle(getInputFieldStyle());

        // Password field
        PasswordField passwordField = new PasswordField();
        passwordField.setPromptText("Password");
        passwordField.setStyle(getInputFieldStyle());

        // Confirm Password field
        PasswordField confirmPasswordField = new PasswordField();
        confirmPasswordField.setPromptText("Confirm Password");
        confirmPasswordField.setStyle(getInputFieldStyle());

        // Buttons
        HBox buttonBox = new HBox(15);
        buttonBox.setAlignment(Pos.CENTER);

        Button backButton = createActionButton("Back", "#666666", true);
        Button confirmButton = createActionButton("Confirm", "#00ffcc", false);

        backButton.setPrefWidth(120);
        confirmButton.setPrefWidth(120);

        // Fixed back button - now it actually works
        backButton.setOnAction(e -> {
            // Get parent to switch tabs
            StackPane contentArea = (StackPane) pane.getParent();
            if (contentArea != null && contentArea.getChildren().size() >= 2) {
                contentArea.getChildren().get(0).setVisible(true);  // Show sign-in
                pane.setVisible(false);  // Hide sign-up
            }
        });

        confirmButton.setOnAction(e -> {
            String name = nameField.getText().trim();
            String email = emailField.getText().trim();
            String password = passwordField.getText().trim();
            String confirmPassword = confirmPasswordField.getText().trim();

            // FIXED: Added confirmPassword.isEmpty() check to validate all 4 fields
            if (name.isEmpty() || email.isEmpty() || password.isEmpty() || confirmPassword.isEmpty()) {
                showAlert(Alert.AlertType.WARNING, "Missing Information", "Please fill in all fields.");
                return;
            }

            if (!password.equals(confirmPassword)) {
                showAlert(Alert.AlertType.WARNING, "Password Mismatch", "Passwords do not match.");
                return;
            }

            if (userManager.registerUser(name, password, email)) {
                showQRCodeSuccessDialog(name);
            } else {
                showAlert(Alert.AlertType.ERROR, "Registration Failed", "Username or email already exists.");
            }
        });

        buttonBox.getChildren().addAll(backButton, confirmButton);

        pane.getChildren().addAll(headerBox, nameField, emailField, passwordField, confirmPasswordField, buttonBox);
        return pane;
    }
